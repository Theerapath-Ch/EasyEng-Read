// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model users {
  id    Int     @id @default(autoincrement())
  name  String?
  email String?
}

enum StoryCategory {
  MOTIVATION
  LOVE
  LIFE
  SELF_HELP
}

enum StoryLevel {
  A1
  A2
  B1
  B2
  C1
  C2
}

enum Status {
  E
  D
}

model story {
  id           Int           @id @default(autoincrement())
  name         String
  category     StoryCategory
  created_at   DateTime      @default(now())
  updated_at   DateTime?     @updatedAt
  level        StoryLevel
  status       Status        @default(E)

  storydetails storydetail[]
}

model storydetail {
  id        Int     @id @default(autoincrement())
  idstory   Int
  shortdesc String?
  detail    String? @db.Text

  story     story   @relation(fields: [idstory], references: [id], onDelete: Cascade)
  questions question[]
}

model question {
  id            Int         @id @default(autoincrement())
  question      String
  explanation   String?     @db.Text

  storyDetailId Int
  storydetail   storydetail @relation(fields: [storyDetailId], references: [id], onDelete: Cascade)

  choices       choice[]
}

model choice {
  id         Int      @id @default(autoincrement())
  text       String
  isCorrect  Boolean  @default(false)

  questionId Int
  question   question @relation(fields: [questionId], references: [id], onDelete: Cascade)
}
